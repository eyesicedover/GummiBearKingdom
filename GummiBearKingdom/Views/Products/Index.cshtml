@model IEnumerable<GummiBearKingdom.Models.Product>

@{
    ViewData["Title"] = "Products - Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
}
<div class="card card-body">
    <h4>All Products</h4>
    <hr />
    <p>@Html.ActionLink("Add New Product", "Create")</p>
    @{
        if (Model.Count() > 0)
        {
            <p>@Html.ActionLink("Delete All Products", "DeleteAll")</p>
        }
    }
</div>
@foreach (var listProduct in Model)
{
     
    var avgReview = listProduct.GetAverageRating();

    <div class="card card-body">
    <h5>@Html.DisplayFor(modelItem => listProduct.Name)</h5>
    <p>@Html.ActionLink("Details", "Details", new { id = listProduct.ProductId }) | @Html.ActionLink("Edit", "Edit", new { id = listProduct.ProductId }) | @Html.ActionLink("Delete", "Delete", new { id = listProduct.ProductId })</p>
    
        @if (avgReview == 0)
        {
            <p>Average Rating: No reviews</p>
        }
        else
        {
            <p>Average Rating: @avgReview</p>
        }
    </div>
}
